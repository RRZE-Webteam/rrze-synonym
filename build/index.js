(()=>{"use strict";var e={n:n=>{var t=n&&n.__esModule?()=>n.default:()=>n;return e.d(t,{a:t}),t},d:(n,t)=>{for(var r in t)e.o(t,r)&&!e.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:t[r]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n)};const n=window.wp.blocks,t=window.wp.i18n,r=window.wp.richText,o=window.wp.blockEditor,l=window.wp.components,a=window.wp.element,s=window.wp.apiFetch;var i=e.n(s);const y=window.ReactJSXRuntime,c="rrze/synonym";(0,r.registerFormatType)(c,{title:(0,t.__)("Synonym/Acronym","rrze-synonym"),tagName:"abbr",className:"rrze-syn",attributes:{title:"title",lang:"lang","data-pron":"data-pron"},edit:e=>{const{value:n,onChange:s,isActive:d}=e,[u,m]=(0,a.useState)([]),[_,p]=(0,a.useState)(!0),[h,g]=(0,a.useState)(null);(0,a.useEffect)((()=>{let e=!1;return async function(){p(!0),g(null);let n=1;const t=[];try{for(;;){const r=await i()({path:`/wp/v2/synonym?status=publish&per_page=100&page=${n}&orderby=title&order=asc&_fields=id,title,synonym,titleLang,meta`});if(e)return;if(t.push(...r),r.length<100)break;n++}m(t)}catch(n){e||g(n)}finally{e||p(!1)}}(),()=>{e=!0}}),[]);const b=(0,a.useMemo)((()=>(u||[]).map((e=>{var n,r,o,l;return{value:String(e.id),label:e?.title?.rendered||(0,t.__)("(no title)","rrze-synonym"),long:null!==(n=null!==(r=e?.synonym)&&void 0!==r?r:e?.meta?.synonym)&&void 0!==n?n:"",lang:null!==(o=null!==(l=e?.titleLang)&&void 0!==l?l:e?.meta?.titleLang)&&void 0!==o?o:""}}))),[u]),[v,z]=(0,a.useState)(!1),[x,f]=(0,a.useState)(""),w=(0,a.useRef)(),S=(0,r.getActiveFormat)(n,c);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(o.RichTextShortcut,{type:"primaryShift",character:"S",onUse:()=>z(!0)}),(0,y.jsx)("span",{ref:w,children:(0,y.jsx)(o.RichTextToolbarButton,{icon:"translation",title:(0,t.__)("Synonym/Acronym","rrze-synonym"),onClick:()=>z((e=>!e)),isActive:d})}),v&&(0,y.jsx)(l.Popover,{anchorRef:w.current,variant:"toolbar",onClose:()=>z(!1),children:(0,y.jsxs)("div",{style:{padding:12,width:360,maxWidth:"90vw"},children:[_&&(0,y.jsxs)(l.Flex,{align:"center",gap:8,children:[(0,y.jsx)(l.Spinner,{}),(0,y.jsx)("span",{children:(0,t.__)("Loading synonymsâ€¦","rrze-synonym")})]}),!_&&h&&(0,y.jsx)(l.Notice,{status:"error",isDismissible:!1,children:(0,t.__)("Failed to load synonyms. Check your REST setup.","rrze-synonym")}),!_&&!h&&(0,y.jsx)(l.ComboboxControl,{label:(0,t.__)("Choose a synonym","rrze-synonym"),help:(0,t.__)("Type to search by title","rrze-synonym"),value:x,onChange:f,options:b}),(0,y.jsxs)(l.Flex,{style:{marginTop:10},justify:"flex-end",gap:8,children:[!!S&&(0,y.jsx)(l.FlexItem,{children:(0,y.jsx)(l.Button,{variant:"secondary",onClick:()=>{s((0,r.removeFormat)(n,c)),z(!1)},children:(0,t.__)("Remove","rrze-synonym")})}),(0,y.jsx)(l.FlexItem,{children:(0,y.jsx)(l.Button,{variant:"primary",onClick:()=>{if(!x)return;const e=b.find((e=>e.value===x));if(!e)return;const t={};e.long&&(t.title=e.long),e.lang&&(t.lang=e.lang);let o=n;if(o.start===o.end){const n=e.label||"";if(n){const e=o.text.length;o=(0,r.insert)(o,n);const t=o.text.length-e;o={...o,start:o.end-t,end:o.end}}}o=(0,r.applyFormat)(o,{type:c,attributes:t}),s(o),z(!1),f("")},disabled:!x,children:S?(0,t.__)("Update","rrze-synonym"):(0,t.__)("Apply","rrze-synonym")})})]})]})})]})}});const d=JSON.parse('{"UU":"create-block/rrze-synonym"}'),u=window.wp.data,m=window.wp.serverSideRender;var _=e.n(m);(0,n.registerBlockType)(d.UU,{edit:function({attributes:e,setAttributes:n}){const{register:r,tag:s,id:i,hstart:c,order:d,sort:m,lang:p,additional_class:h,color:g,load_open:b,expand_all_link:v,hide_title:z,hide_accordion:x,synonymstyle:f,synonym:w}=e,S=(0,o.useBlockProps)(),[j,C]=(0,a.useState)([""]),[k,F]=(0,a.useState)([""]),[R,T]=(0,a.useState)([""]),E=(0,u.useSelect)((e=>e("core").getEntityRecords("taxonomy","synonym_category")),[]),A=[{label:(0,t.__)("all","rrze-synonym"),value:""}];E&&Object.values(E).forEach((e=>{A.push({label:e.name,value:e.slug})}));const q=(0,u.useSelect)((e=>e("core").getEntityRecords("taxonomy","synonym_tag")),[]),O=[{label:(0,t.__)("all","rrze-synonym"),value:""}];q&&Object.values(q).forEach((e=>{O.push({label:e.name,value:e.slug})}));const B=(0,u.useSelect)((e=>e("core").getEntityRecords("postType","synonym",{per_page:-1,orderby:"title",order:"asc"})),[]),U=[{label:(0,t.__)("all","rrze-synonym"),value:0}];B&&Object.values(B).forEach((e=>{U.push({label:e.title.rendered?e.title.rendered:(0,t.__)("No title","rrze-synonym"),value:e.id})}));const L=[{label:(0,t.__)("all","rrze-faq"),value:""},{label:(0,t.__)("German","rrze-faq"),value:"de"},{label:(0,t.__)("English","rrze-faq"),value:"en"},{label:(0,t.__)("French","rrze-faq"),value:"fr"},{label:(0,t.__)("Spanish","rrze-faq"),value:"es"},{label:(0,t.__)("Russian","rrze-faq"),value:"ru"},{label:(0,t.__)("Chinese","rrze-faq"),value:"zh"}];return(0,t.__)("-- hidden --","rrze-synonym"),(0,t.__)("A - Z","rrze-synonym"),(0,t.__)("Tagcloud","rrze-synonym"),(0,t.__)("Tabs","rrze-synonym"),(0,t.__)("Title","rrze-synonym"),(0,t.__)("ID","rrze-synonym"),(0,t.__)("Sort field","rrze-synonym"),(0,t.__)("ASC","rrze-synonym"),(0,t.__)("DESC","rrze-synonym"),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(o.InspectorControls,{children:(0,y.jsxs)(l.PanelBody,{children:[(0,y.jsx)(l.SelectControl,{label:(0,t.__)("synonym","rrze-synonym"),help:(0,t.__)("Show a selection of individual Synonyms","rrze-synonym"),value:R,options:U,onChange:e=>{T(e),n({id:String(e)})},multiple:!0}),(0,y.jsx)(l.SelectControl,{label:(0,t.__)("Language","rrze-synonym"),help:(0,t.__)("Show only Synonyms matching the selected language.","rrze-synonym"),value:p,options:L,onChange:e=>n({lang:e})})]})}),(0,y.jsx)("div",{...S,children:(0,y.jsx)(_(),{block:"create-block/rrze-synonym",attributes:e})})]})},save:function(){return null}})})();